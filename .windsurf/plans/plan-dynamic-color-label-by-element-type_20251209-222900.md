# 计划：根据元素类型动态显示颜色标签

## 任务背景

当前右侧属性面板中的颜色选择器标签（"文字色"）是硬编码的，无论选择什么类型的元素都显示相同的标签。这导致用户体验不佳：

- 选择文本元素时，显示"文字色"是合适的
- 选择矩形、圆形等形状时，应该显示"边框色"或"描边色"
- 选择线条、箭头时，应该显示"线条色"
- 选择自由绘制时，应该显示"笔触色"

## 目标与非目标

### 目标
1. 根据当前选中的元素类型，动态显示合适的颜色标签
2. 支持多选时的智能标签显示（如果选中的是同类型元素，显示该类型的标签；如果是混合类型，显示通用标签）
3. 保持代码的可维护性和国际化支持

### 非目标
- 不修改颜色选择器的功能逻辑
- 不修改颜色选择器的样式

## 需求与场景

### 元素类型与标签映射

| 元素类型 | 描边/边框颜色标签 | 背景/填充颜色标签 |
|---------|-----------------|-----------------|
| text | 文字色 | 文字背景色 |
| rectangle, diamond, ellipse | 边框色 | 填充色 |
| line, arrow | 线条色 | - |
| freedraw | 笔触色 | - |
| image | - | - |
| 混合选择 | 描边色 | 填充色 |
| 无选择（工具状态） | 根据当前工具类型 | 根据当前工具类型 |

### 关键场景
1. 用户选择单个文本元素 → 显示"文字色"
2. 用户选择单个矩形 → 显示"边框色"
3. 用户选择多个矩形 → 显示"边框色"
4. 用户选择文本 + 矩形 → 显示"描边色"（通用标签）
5. 用户使用文本工具但未创建元素 → 显示"文字色"
6. 用户使用矩形工具但未创建元素 → 显示"边框色"

## 技术方案草案

### 涉及文件
- `packages/excalidraw/components/PropertiesMenu.tsx` - 属性面板组件

### 实现思路
1. 创建一个工具函数 `getStrokeColorLabel(elements, activeTool)` 来根据元素类型返回合适的标签
2. 在 PropertiesMenu 中调用该函数来动态获取标签
3. 直接使用中文字符串，不需要 i18n

### 标签映射逻辑
```typescript
function getStrokeColorLabel(selectedElements, activeTool): string {
  // 1. 如果没有选中元素，根据当前工具类型返回
  // 2. 如果选中单一类型元素，返回该类型的标签
  // 3. 如果选中混合类型，返回通用标签"描边色"
}
```

## 验收标准

1. **功能验收**
   - [ ] 选择文本元素时显示"文字色"
   - [ ] 选择形状元素（矩形、圆、菱形）时显示"边框色"
   - [ ] 选择线条/箭头时显示"线条色"
   - [ ] 选择自由绘制时显示"笔触色"
   - [ ] 混合选择时显示"描边色"
   - [ ] 无选择时根据当前工具显示对应标签

2. **代码质量**
   - [ ] 代码逻辑清晰，易于维护

## 风险与未知问题

1. **边界情况**：需要处理好工具切换、元素选择变化等边界情况
2. **性能**：确保标签计算不会在频繁选择变化时造成性能问题（应该很轻量）
